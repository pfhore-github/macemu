# SCC(Z8530)
## PIN(A:modem/ B:pinter)
### CTSA/B ハンドシェイクピン: 

送信クリア（入力、アクティブLow）。 これらのピンは、Auto Enable（WR3、D5 = 1）用にプログラムされている場合、トランスミッタイネーブルとして機能します。 入力をLowにすると、それぞれのトランスミッターが有効になります。 Auto Enableとしてプログラムされていない場合は、汎用入力として使用できます。 両方の入力は、立ち上がり時間が遅い入力に対応するためにシュミットトリガーバッファリングされています。 SCCはこれらの入力でパルスを検出し、両方の論理レベルの遷移でCPUに割り込むことができます。

### DCDA/B GPiAピン

データキャリア検出（入力、アクティブLow）。 これらのピンは、Auto Enable（WR3、D5 = 1）用にプログラムされている場合、レシーバイネーブルとして機能します。 それ以外の場合、これらは汎用入力ピンとして使用されます。 両方のピンは、シュミットトリガーバッファーでバッファされ、立ち上がり時間が遅い信号に対応します。 SCCはこれらのピンのパルスを検出し、両方の論理レベルの遷移でCPUに割り込みます。

### RTSA/B データ入力ピン

送信要求（出力、アクティブLow）。 RTSピンは、汎用出力として、または自動有効化機能とともに使用できます。 非同期モードでAuto Enable ON（WR3、D5 = 1）を使用すると、トランスミッタが空になった後に RTSピンがHighになります。 Auto EnableがOFFの場合、/ RTSピンは汎用出力として使用され、WR5のビットD1の反転状態に厳密に従います。

### SYNC RTxC 同期

同期（入力または出力、アクティブLow）。これらのピンは、入力、出力、または水晶発振回路の一部として機能します。非同期受信モード（水晶発振器オプションが選択されていない）では、これらのピンはCTSおよびDCDと同様の入力です。このモードでは、これらのラインの遷移は読み取りレジスタ0の同期/ハントステータスビットの状態に影響しますが、他の機能はありません。
水晶発振器が選択されていない外部同期モードでは、これらのラインは入力としても機能します。このモードでは、同期文字の最後のビットが受信された後、/ SYNCがLowに駆動されてクロックサイクルを受信します。キャラクタアセンブリは、SYNCのアクティブ化の直前の受信クロックの立ち上がりエッジで開始されます。
水晶発振器が選択されていない内部同期モード（MonosyncおよびBisync）では、これらのピンは出力として機能し、同期状態がラッチされない受信クロックサイクルの一部の間のみアクティブになります。これらの出力は、同期パターンが認識されるたびにアクティブになります（文字の境界に関係なく）。 SDLCモードでは、ピンは出力として機能し、フラグを受信すると有効になります。 / SYNCピンは、次の場合に入力から出力に切り替わります。
monosync、bisync、またはSDLCはWR4でプログラムされ、同期モードが有効になります。

### DTR/REQ ハンドシェイク出力(DTR)/ VIA1A-7(REQ)

データ端末準備完了/要求（出力、アクティブLow）。 これらのピンはプログラム可能（WR14、D2）で、汎用出力またはDMA要求ラインとして機能します。 DTR機能用にプログラムされている場合（WR14 D2 = 0）、これらの出力は書き込みレジスタ5（WR5 D7）のDTRビットにプログラムされた状態に従います。 レディモードにプログラムされている場合、これらのピンはトランスミッターのDMAリクエストとして機能します。

## レジスタアクセス

Z85X30のレジスタは、レジスタポインタを使用してアドレッシングを実行する2つのステッププロセスでアクセスされます。特定のレジスタにアクセスするには、WR0への書き込みによってポインタビットを設定します。 Z85X30には1つのセットしか存在しないため、ポインタービットはどちらのチャネルにも書き込むことができます。ポインタビットが設定された後、D//CがLowのZ85X30の次の読み取りまたは書き込みサイクルは、目的のレジスタにアクセスします。この読み取りまたは書き込みサイクルの最後に、ポインタービットが0にリセットされるため、次の制御書き込みはWR0のポインターに行われます。

RR8（受信データFIFO）への読み取りまたはWR8（送信データFIFO）への書き込みは、この方法で、またはD // CピンがHighのZ85X30にアクセスすることによって行われます。 D//C Highでの読み取りまたは書き込みは、ポインタービットの状態とは無関係に、データレジスタに直接アクセスします。これにより、データレジスタへのシングルサイクルアクセスが可能になり、ポインタビットに影響を与えません。

明示的に設定されていない限り、ポインタビットが0にリセットされるという事実は、WR0とRR0も1サイクルでアクセスできることを意味します。つまり、WR0またはRR0にアクセスする前に、ポインタビットに0を書き込む必要はありません。
## IFプログラミング

### ポーリング

これは、実装する最も簡単なモードです。 ソフトウェアは、SCCをポーリングして、データがSCCから入力または出力されるタイミングを決定する必要があります。 このモードでは、MIE（WR9、ビット3）、および待機/DMAリクエストイネーブル（WR1、ビット7）がどちらも0にリセットされ、割り込みまたはDMAリクエストが無効になります。 次に、ソフトウェアはRR0をポーリングして、受信バッファー、送信バッファー、および外部ステータスのステータスを判断する必要があります。

ポーリングシーケンス中に、読み取りレジスタ0のステータスが各チャネルで検査されます。 このレジスタは、受信または送信データ転送が必要かどうか、およびエラーなどの特別な条件が存在するかどうかを示します。

このI/O転送方法では、割り込みが回避されるため、すべての割り込み機能を無効にする必要があります。 割り込みが有効になっていない場合、この動作モードでは、データハンドラルーチンにジャンプする前に、受信レジスタ0の読み取りサイクルを開始して着信文字を検出する必要があります。
